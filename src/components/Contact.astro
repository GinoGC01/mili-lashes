---
const whatsappMessage = "Hola Mili, estoy lista para llevar mi carrera al siguiente nivel. Quiero información sobre la Mentoria.";
const whatsappLink = `https://wa.me/1122223333?text=${encodeURIComponent(whatsappMessage)}`;
---

<section id="contacto" class="relative min-h-screen flex items-center justify-center overflow-hidden bg-[#0c0a1f] perspective-2000">
  
  <div class="absolute inset-0 z-0 bg-[radial-gradient(ellipse_at_center,_#1e1b4a_0%,_#0c0a1f_70%,_#000000_100%)] opacity-90"></div>
  <div class="absolute inset-0 bg-[url('/images/noise.png')] opacity-[0.04] mix-blend-soft-light pointer-events-none z-0"></div>
  
  <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[80vw] h-[80vw] md:w-[600px] md:h-[600px] bg-primary/30 rounded-full blur-[150px] animate-pulse-slow z-0 pointer-events-none"></div>

  <div class="relative z-20 max-w-5xl mx-auto px-6 text-center">
    
    <div class="reveal-up space-y-2 mb-24">
      <span class="block text-primary font-bold tracking-[0.5em] uppercase text-sm md:text-base animate-tracking-in text-glow-sm">
        Acceso Exclusivo
      </span>
      <h2 class="font-display font-black leading-[0.9] md:leading-[0.8] tracking-tighter text-white py-4">
        <span class="block text-[12vw] md:text-[10rem] outlined-text opacity-60 will-change-transform">TU IMPERIO</span>
        <span class="block text-[13vw] md:text-[11rem] chrome-text text-glow relative -mt-4 md:-mt-12 z-10 will-change-transform py-2">COMIENZA</span>
      </h2>
    </div>

    <div class="reveal-up relative inline-block group" style="transition-delay: 300ms;">
      <div class="absolute inset-0 bg-primary/70 blur-[60px] rounded-full opacity-0 group-hover:opacity-100 transition-all duration-700 group-hover:scale-150 z-0"></div>
      
      <a 
        href={whatsappLink}
        target="_blank" 
        rel="noopener noreferrer"
        class="relative z-20 flex items-center justify-center gap-6 bg-[#1e1b4a]/40 backdrop-blur-2xl border-2 border-indigo-200/20 px-12 py-8 md:px-20 md:py-10 rounded-full transition-all duration-500 transform group-hover:scale-105 group-hover:border-primary/50 group-hover:shadow-[0_0_60px_rgba(217,70,239,0.5)] overflow-hidden will-change-transform"
      >
        <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent -translate-x-[150%] skew-x-[-20deg] group-hover:animate-shine-explosive z-20 pointer-events-none"></div>

        <div class="text-center relative z-10">
          <span class="block text-xl md:text-2xl font-bold text-white uppercase tracking-widest group-hover:text-glow transition-all">
            Hablar con Mili
          </span>
          <span class="block text-xs md:text-sm text-indigo-200/80 uppercase tracking-[0.2em] font-bold mt-1">
            Reserva tu entrevista
          </span>
        </div>
      </a>
    </div>

    <div class="reveal-up mt-16 flex flex-col items-center gap-3 opacity-70" style="transition-delay: 500ms;">
      <div class="h-px w-24 bg-gradient-to-r from-transparent via-indigo-200/30 to-transparent"></div>
      <p class="text-xs uppercase tracking-[0.3em] font-light text-indigo-200">
        Solo 3 cupos disponibles este mes
      </p>
    </div>

  </div>
</section>

<style>
  .perspective-2000 {
    perspective: 2000px;
  }

  /* Ajuste del texto delineado para que tenga un tinte frío */
  .outlined-text {
    -webkit-text-stroke: 2px rgba(200, 210, 255, 0.3); /* Blanco azulado */
    color: transparent;
    transition: all 0.8s ease;
  }
  .group:hover .outlined-text {
    -webkit-text-stroke: 2px rgba(200, 210, 255, 0.7);
    opacity: 0.9;
  }

  /* Efecto Cromo ajustado para reflejar tonos fríos */
  .chrome-text {
    background: linear-gradient(to bottom, #ffffff 0%, #a5b4fc 50%, #ffffff 100%); /* Reflejos índigo claro */
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
  }

  /* Glow magenta más intenso para contrastar el fondo azul */
  .text-glow {
    text-shadow: 0 0 20px rgba(217, 70, 239, 0.8), 0 0 40px rgba(217, 70, 239, 0.4);
  }
  
  .text-glow-sm {
      text-shadow: 0 0 10px rgba(217, 70, 239, 0.6);
  }

  @keyframes tracking-in {
    0% { letter-spacing: 1em; opacity: 0; }
    100% { letter-spacing: 0.5em; opacity: 1; }
  }
  .animate-tracking-in {
    animation: tracking-in 1.5s cubic-bezier(0.215, 0.610, 0.355, 1.000) both;
    animation-delay: 0.5s;
  }

  @keyframes shine-explosive {
    0% { transform: translateX(-150%) skewX(-20deg); }
    100% { transform: translateX(200%) skewX(-20deg); }
  }
  .animate-shine-explosive {
    animation: shine-explosive 0.8s cubic-bezier(0.19, 1, 0.22, 1);
  }

  .reveal-up {
    opacity: 0;
    transform: translate3d(0, 60px, 0) scale(0.95);
    will-change: transform, opacity;
    transition: all 1.2s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .reveal-up.active {
    opacity: 1;
    transform: translate3d(0, 0, 0) scale(1);
  }

  @keyframes pulse-slow {
    0%, 100% { opacity: 0.3; transform: translate(-50%, -50%) scale(1); }
    50% { opacity: 0.6; transform: translate(-50%, -50%) scale(1.15); }
  }
  .animate-pulse-slow {
    animation: pulse-slow 5s infinite ease-in-out;
  }
</style>

<script>
  const setupImposingReveal = () => {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          setTimeout(() => {
              entry.target.classList.add('active');
          }, 100);
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.2 });

    document.querySelectorAll('#contacto .reveal-up').forEach(el => observer.observe(el));
  };

  document.addEventListener('astro:page-load', setupImposingReveal);
</script>